launch:

- arg:
    name: robot_model
    default: "$(dirname)/../urdf/r2b2.urdf"
- arg:
    name: test_mode
    default: 'False'

# - arg:
#     name: robot_description
#     default: "$(find xacro)/xacro $(arg model)"


- node:
    pkg: roboclaw_driver2
    exec: roboclaw_node
    name: roboclaw
    param:
      - name: loop_hz
        value: 20
      - name: speed_cmd_topic
        value: roboclaw/speed_command
      - name: stats_topic
        value: roboclaw/stats
      - name: test_mode
        value: $(var test_mode)
      - name: dev_names
        value: "/dev/ttyACM0,/dev/ttyACM1"
    # args: "--ros-args --log-level roboclaw_driver:=debug"

- node:
    pkg: r2b2_base
    exec: base_node
    name: base_node
    param:
      - name: loop_hz
        value: 20
      - name: cmd_vel_topic
        value: cmd_vel
      - name: odom_topic
        value: odom
      - name: speed_command_topic
        value: roboclaw/speed_command
      - name: roboclaw_front_stats_topic
        value: roboclaw/stats
      - name: log_leve
        value: info
      - name: publish_odom_tf
        value: True
    # args: "--ros-args --log-level base_node:=debug"

- node:
    pkg: joint_state_publisher
    exec: joint_state_publisher
    name: joint_state_publisher
    param:
      - name: use_gui
        value: False

- node:
    pkg: robot_state_publisher
    exec: robot_state_publisher
    name: robot_state_publisher
    param:
      - name: robot_description
        value: "$(command 'xacro $(dirname)/../urdf/r2b2.xacro')"
